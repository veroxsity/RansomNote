(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},2081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},9822:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>c,originalPathname:()=>x,pages:()=>d,routeModule:()=>u,tree:()=>o});var r=t(7096),a=t(6132),n=t(7284),l=t.n(n),i=t(2564),m={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(m[e]=()=>i[e]);t.d(s,m);let o=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3982)),"/home/jelly/Documents/Programming/RansomNote/frontend/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,8621)),"/home/jelly/Documents/Programming/RansomNote/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],d=["/home/jelly/Documents/Programming/RansomNote/frontend/app/page.tsx"],x="/page",c={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},5014:(e,s,t)=>{Promise.resolve().then(t.bind(t,467))},467:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>Page});var r=t(784),a=t(9885),n=t.n(a),l=t(2434);let useGame=()=>{let e=(0,a.useContext)(l.G);return e||{lobby:null,currentPlayer:null,round:null,error:null,isLoading:!1,hasSubmitted:!1,hasVoted:!1,lastWinnerId:null,isJudgeTurn:!1,isConnected:!1,createLobby:()=>{},joinLobby:()=>{},startGame:()=>{},setReady:()=>{},submitAnswer:()=>{},submitVote:()=>{},judgePick:()=>{}}},LobbyCreation=()=>{let[e,s]=(0,a.useState)(""),[t,n]=(0,a.useState)(""),[l,i]=(0,a.useState)(!1),{createLobby:m,joinLobby:o,error:d,isLoading:x}=useGame();return(0,r.jsxs)("div",{className:"max-w-md mx-auto mt-4 sm:mt-10 p-4 sm:p-6 bg-white rounded-lg shadow-md",children:[r.jsx("h1",{className:"text-xl sm:text-2xl font-bold mb-4 sm:mb-6 text-center",children:l?"Join a Game":"Create New Game"}),d&&r.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-md text-sm",children:d}),(0,r.jsxs)("form",{onSubmit:s=>{s.preventDefault(),l?o(t.toUpperCase(),e):m(e)},className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"nickname",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nickname"}),r.jsx("input",{type:"text",id:"nickname",value:e,onChange:e=>s(e.target.value),required:!0,minLength:2,maxLength:15,className:"mt-1 block w-full p-3 sm:p-2 border rounded-md text-base",placeholder:"Enter your nickname"})]}),l&&(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"lobbyCode",className:"block text-sm font-medium text-gray-700 mb-1",children:"Lobby Code"}),r.jsx("input",{type:"text",id:"lobbyCode",value:t,onChange:e=>n(e.target.value.toUpperCase()),required:!0,minLength:6,maxLength:6,className:"mt-1 block w-full p-3 sm:p-2 border rounded-md uppercase text-base",placeholder:"Enter lobby code"})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-end space-y-2 sm:space-y-0 sm:space-x-4 pt-2",children:[r.jsx("button",{type:"button",onClick:()=>i(!l),className:"w-full sm:w-auto px-4 py-3 sm:py-2 text-base sm:text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 active:bg-gray-300",children:l?"Create Instead":"Join Instead"}),r.jsx("button",{type:"submit",disabled:x,className:"w-full sm:w-auto px-4 py-3 sm:py-2 text-base sm:text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 active:bg-blue-800 disabled:opacity-50",children:x?"Loading...":l?"Join Game":"Create Game"})]})]})]})},PlayerList=({players:e,judgeIndex:s})=>(0,r.jsxs)("div",{className:"mt-4 sm:mt-6",children:[r.jsx("h2",{className:"text-base sm:text-lg font-medium mb-2 sm:mb-3",children:"Players"}),r.jsx("ul",{className:"space-y-2",children:e.map((e,t)=>(0,r.jsxs)("li",{className:`flex items-center justify-between p-3 rounded-md ${s===t?"bg-yellow-100":"bg-gray-100"}`,children:[(0,r.jsxs)("div",{className:"flex items-center min-w-0 flex-1",children:[s===t&&r.jsx("span",{className:"text-yellow-600 mr-2 text-lg sm:text-base",children:"\uD83D\uDC51"}),r.jsx("span",{className:"font-medium truncate text-sm sm:text-base",children:e.nickname}),"DISCONNECTED"===e.status&&r.jsx("span",{className:"ml-2 text-xs sm:text-sm text-gray-500 flex-shrink-0",children:"(Disconnected)"}),"READY"===e.status&&r.jsx("span",{className:"ml-2 inline-flex items-center rounded-full bg-green-100 px-2 py-0.5 text-xs font-medium text-green-700 flex-shrink-0",children:"Ready"})]}),r.jsx("span",{className:"text-base sm:text-lg font-semibold ml-2 flex-shrink-0",children:e.score})]},e.id))})]}),WordPool=({words:e,selectedWords:s,onWordSelect:t})=>{let a=e.reduce((e,s)=>(e[s]=(e[s]||0)+1,e),{});return(0,r.jsxs)("div",{className:"mt-4 sm:mt-6",children:[r.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-2 sm:mb-3",children:"Your Words"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:e.map((e,n)=>{let l=s.includes(e);return(0,r.jsxs)("button",{onClick:()=>!l&&t(e),disabled:l,className:`px-3 py-2 sm:px-4 sm:py-2 rounded-md font-medium transition-colors text-sm sm:text-base min-h-[44px] ${l?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600 active:bg-blue-700 cursor-pointer"}`,"aria-label":a[e]>1?`${e}, ${a[e]} available`:e,children:[e,a[e]>1&&(0,r.jsxs)("span",{className:"ml-1 sm:ml-2 text-xs bg-white/20 rounded px-1",children:["x",a[e]]})]},`${e}-${n}`)})})]})},SubmissionArea=({words:e,onRemove:s,onMove:t,onSubmit:a})=>(0,r.jsxs)("div",{className:"mb-4 sm:mb-6",children:[r.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-2 sm:mb-3",children:"Your Answer"}),r.jsx("div",{className:"min-h-[80px] sm:min-h-[100px] bg-gray-50 border-2 border-dashed border-gray-300 rounded-md p-3 sm:p-4 mb-3 sm:mb-4",role:"list","aria-label":"Selected words",children:0===e.length?r.jsx("p",{className:"text-gray-400 text-center text-sm sm:text-base",children:"Select words to build your answer"}):r.jsx("div",{className:"flex flex-wrap gap-2",children:e.map((a,n)=>(0,r.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",role:"listitem",children:[r.jsx("button",{onClick:()=>s(n),onKeyDown:s=>{t&&("ArrowLeft"===s.key&&(s.preventDefault(),t(n,Math.max(0,n-1))),"ArrowRight"===s.key&&(s.preventDefault(),t(n,Math.min(e.length-1,n+1))))},tabIndex:0,className:"px-3 py-2 sm:px-3 sm:py-1 bg-green-500 text-white rounded-md hover:bg-red-500 active:bg-red-600 transition-colors text-sm sm:text-base min-h-[44px] sm:min-h-0",title:"Click to remove","aria-label":`Word ${a}. Press Enter to remove. Use left and right arrows to reorder.`,children:a}),t&&(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-1",children:[r.jsx("button",{onClick:()=>t(n,Math.max(0,n-1)),disabled:0===n,className:"px-2 py-1 text-xs bg-gray-200 rounded disabled:opacity-50 min-h-[36px] min-w-[36px] sm:min-h-0 sm:min-w-0",title:"Move left","aria-label":"Move word left",children:"←"}),r.jsx("button",{onClick:()=>t(n,Math.min(e.length-1,n+1)),disabled:n===e.length-1,className:"px-2 py-1 text-xs bg-gray-200 rounded disabled:opacity-50 min-h-[36px] min-w-[36px] sm:min-h-0 sm:min-w-0",title:"Move right","aria-label":"Move word right",children:"→"})]})]},n))})}),r.jsx("button",{onClick:a,disabled:0===e.length,className:"w-full bg-green-600 text-white px-4 py-3 sm:py-3 rounded-md font-semibold hover:bg-green-700 active:bg-green-800 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-base min-h-[48px]",children:"Submit Answer"})]}),VotingUI=({submissions:e,players:s,currentPlayerId:t,judgeIndex:n})=>{let{submitVote:l,judgePick:i}=useGame(),[m,o]=(0,a.useState)(null),d=(process.env.NEXT_PUBLIC_VOTE_MODE||"group").toLowerCase(),x="number"==typeof n&&s[n]&&s[n].id===t,handleVote=e=>{e!==t&&null===m&&(o(e),l(e))},handleJudgePick=e=>{x&&null===m&&(o(e),i(e))};return(0,r.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[r.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4",children:"judge"===d?x?"Pick the Winner":"Waiting for the judge…":"Vote for the Best Answer"}),Object.entries(e).map(([e,a])=>{let n=Number(e),l=s.find(e=>e.id===n),i=n===t,o=m===n,c="judge"===d?x&&!i:!i;return(0,r.jsxs)("div",{className:`p-3 sm:p-4 rounded-md border-2 transition-all min-h-[60px] ${i?"bg-gray-100 border-gray-300 cursor-not-allowed":o?"bg-green-100 border-green-500":c?"bg-white border-gray-300 hover:border-blue-500 active:border-blue-600 cursor-pointer":"bg-white border-gray-200 cursor-not-allowed opacity-80"}`,onClick:()=>{c&&("judge"===d?handleJudgePick(n):handleVote(n))},children:[(0,r.jsxs)("p",{className:"font-semibold text-xs sm:text-sm text-gray-600 mb-1 sm:mb-2",children:[l?.nickname," ",i&&"(You)"]}),r.jsx("p",{className:"text-base sm:text-lg break-words",children:a.join(" ")}),o&&r.jsx("p",{className:"text-green-600 font-semibold mt-2 text-sm sm:text-base",children:"judge"===d?"✓ Picked":"✓ Voted"})]},e)})]})},Timer=({initialSeconds:e,onExpire:s,className:t})=>{let[n,l]=(0,a.useState)(e),i=(0,a.useRef)(null);(0,a.useEffect)(()=>{l(e)},[e]),(0,a.useEffect)(()=>{if(n<=0){s&&s();return}return i.current=setTimeout(()=>l(e=>e-1),1e3),()=>{i.current&&clearTimeout(i.current)}},[n,s]);let m=Math.floor(n/60).toString().padStart(2,"0"),o=(n%60).toString().padStart(2,"0");return(0,r.jsxs)("div",{className:t??"text-sm text-gray-600",children:[(0,r.jsxs)("span",{"aria-hidden":!0,children:["⏳ ",m,":",o]}),(0,r.jsxs)("span",{className:"sr-only",role:"status","aria-live":"polite",children:["Time remaining ",m," minutes ",o," seconds"]})]})},ScoreBoard=({players:e,className:s})=>{let t=[...e].sort((e,s)=>s.score-e.score);return(0,r.jsxs)("div",{className:s??"",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Scores"}),r.jsx("ul",{className:"space-y-1",children:t.map((e,s)=>(0,r.jsxs)("li",{className:"flex items-center justify-between text-sm bg-gray-50 rounded px-2 py-1",children:[(0,r.jsxs)("span",{className:"truncate",children:[s+1,". ",e.nickname]}),r.jsx("span",{className:"font-semibold",children:e.score})]},e.id))})]})},GameBoard=()=>{let{lobby:e,round:s,currentPlayer:t,submitAnswer:n,lastWinnerId:l,hasSubmitted:i}=useGame(),[m,o]=(0,a.useState)([]);return((0,a.useEffect)(()=>{o([])},[e?.roundNumber]),(0,a.useEffect)(()=>{i&&o([])},[i]),e&&s&&t)?r.jsx("div",{className:"max-w-4xl mx-auto p-3 sm:p-6",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-3 sm:p-6 mb-4 sm:mb-6 relative",children:[null!=l&&(0,r.jsxs)("div",{className:"absolute left-1/2 -translate-x-1/2 -top-3 bg-green-600 text-white text-xs sm:text-sm px-2 sm:px-3 py-1 rounded-full shadow z-10",children:["Winner: ",e.players.find(e=>e.id===l)?.nickname]}),r.jsx("div",{className:"hidden sm:block absolute right-4 top-4 w-48",children:r.jsx(ScoreBoard,{players:e.players})}),(0,r.jsxs)("h2",{className:"text-xl sm:text-2xl font-bold mb-3 sm:mb-4 pr-12 sm:pr-52",children:["Round ",e.roundNumber]}),r.jsx("div",{className:"block sm:hidden mb-3",children:r.jsx(ScoreBoard,{players:e.players})}),r.jsx("div",{className:"bg-blue-50 p-3 sm:p-4 rounded-md mb-4 sm:mb-6",children:r.jsx("p",{className:"text-base sm:text-lg font-semibold text-blue-900",children:s.prompt})}),"ANSWERING"===s.stage&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-3 gap-2",children:[r.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Build your sentence using your words"}),r.jsx(Timer,{initialSeconds:s.submissionTime??90})]}),r.jsx(SubmissionArea,{words:m,onRemove:e=>{o(s=>s.filter((s,t)=>t!==e))},onMove:(e,s)=>{e!==s&&o(t=>{let r=[...t],[a]=r.splice(e,1);return r.splice(s,0,a),r})},onSubmit:()=>{0!==m.length&&n(m)}}),r.jsx(WordPool,{words:t.words,selectedWords:m,onWordSelect:e=>{o(s=>[...s,e])}})]}),"VOTING"===s.stage&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"flex justify-end mb-3",children:r.jsx(Timer,{initialSeconds:s.voteTime??30})}),r.jsx(VotingUI,{submissions:s.submissions,players:e.players,currentPlayerId:t.id,judgeIndex:e.judgeIndex})]}),"REVEALING"===s.stage&&(0,r.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[r.jsx("h3",{className:"text-lg sm:text-xl font-semibold",children:"Submissions"}),Object.entries(s.submissions).map(([s,t])=>{let a=e.players.find(e=>e.id===Number(s));return(0,r.jsxs)("div",{className:"bg-gray-50 p-3 sm:p-4 rounded-md",children:[r.jsx("p",{className:"font-semibold text-sm sm:text-base",children:a?.nickname}),r.jsx("p",{className:"text-base sm:text-lg",children:t.join(" ")})]},s)}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Voting will begin shortly…"})]}),"ROUND_END"===e.state&&(0,r.jsxs)("div",{className:"mt-4 sm:mt-6 text-center text-xs sm:text-sm text-gray-600",children:["Next round starting in ",r.jsx("span",{className:"inline-block align-middle",children:r.jsx(Timer,{initialSeconds:5})})]})]})}):r.jsx("div",{children:"Loading game..."})};let ErrorBoundary=class ErrorBoundary extends n().Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,s){console.error("ErrorBoundary caught an error",e,s)}render(){return this.state.hasError?(0,r.jsxs)("div",{className:"max-w-2xl mx-auto p-6 bg-red-50 text-red-800 rounded",children:[r.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Something went wrong."}),r.jsx("p",{children:"Please refresh the page to continue."})]}):this.props.children}};function Page(){let{lobby:e,error:s,startGame:t,setReady:a,currentPlayer:n,round:l,isConnected:i,isLoading:m}=useGame(),o=n?.id===1,d=n?.status==="READY",x=e&&["IN_PROGRESS","ROUND_ACTIVE","VOTING","ROUND_END"].includes(e.state);return(0,r.jsxs)("div",{className:"min-h-screen p-3 sm:p-8 bg-gray-100",children:[!i&&r.jsx("div",{className:"max-w-2xl mx-auto mb-3 sm:mb-4 p-2 rounded bg-yellow-100 text-yellow-800 text-center text-xs sm:text-sm",children:"Reconnecting to server..."}),r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-center mb-4 sm:mb-8",children:"Ransom Notes Online"}),s&&r.jsx("div",{className:"max-w-md mx-auto mb-3 sm:mb-4 p-3 sm:p-4 bg-red-100 text-red-700 rounded text-sm",children:s}),e?x?r.jsx(ErrorBoundary,{children:r.jsx(GameBoard,{})}):r.jsx("div",{className:"max-w-2xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-md",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-3 sm:mb-4 gap-2",children:[(0,r.jsxs)("h2",{className:"text-lg sm:text-xl font-semibold",children:["Lobby: ",e.code]}),(0,r.jsxs)("div",{className:"text-xs sm:text-sm text-gray-600",children:["State: ",e.state]})]}),"number"==typeof e.judgeIndex&&e.judgeIndex>=0&&(0,r.jsxs)("div",{className:"mb-3 p-2 rounded bg-yellow-50 text-yellow-800 text-xs sm:text-sm",children:["Current judge: ",r.jsx("strong",{children:e.players[e.judgeIndex]?.nickname})]}),r.jsx(PlayerList,{players:e.players,judgeIndex:e.judgeIndex}),"WAITING_FOR_PLAYERS"===e.state&&(0,r.jsxs)("div",{className:"mt-4 space-y-2",children:[!d&&r.jsx("button",{onClick:a,disabled:m,className:"w-full bg-blue-500 text-white px-4 py-3 sm:py-2 rounded hover:bg-blue-600 active:bg-blue-700 disabled:opacity-50 text-base font-medium min-h-[48px] sm:min-h-0",children:m?"Ready…":"Ready Up"}),o&&e.players.length>=2&&r.jsx("button",{onClick:t,className:"w-full bg-green-500 text-white px-4 py-3 sm:py-2 rounded hover:bg-green-600 active:bg-green-700 text-base font-medium min-h-[48px] sm:min-h-0",children:"Start Game"}),o&&r.jsx("button",{onClick:()=>{let e=new CustomEvent("game:end-request");window.dispatchEvent(e)},className:"w-full bg-red-500 text-white px-4 py-3 sm:py-2 rounded hover:bg-red-600 active:bg-red-700 text-base font-medium min-h-[48px] sm:min-h-0",children:"End Game"}),(0,r.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600 text-center mt-2",children:[e.players.length," / 8 players • Minimum 2 players to start"]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 text-center",children:[e.players.filter(e=>"READY"===e.status).length," ready"]})]}),"GAME_END"===e.state&&(0,r.jsxs)("div",{className:"mt-4 text-center",children:[r.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-green-600 mb-3 sm:mb-4",children:"Game Over!"}),r.jsx("div",{className:"space-y-2",children:[...e.players].sort((e,s)=>s.score-e.score).map((e,s)=>(0,r.jsxs)("div",{className:"flex justify-between p-2 sm:p-2 bg-gray-50 rounded text-sm sm:text-base",children:[(0,r.jsxs)("span",{children:[s+1,". ",e.nickname]}),(0,r.jsxs)("span",{className:"font-bold",children:[e.score," points"]})]},e.id))})]})]})}):r.jsx(LobbyCreation,{})]})}},3982:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>n,default:()=>m});var r=t(5153);let a=(0,r.createProxy)(String.raw`/home/jelly/Documents/Programming/RansomNote/frontend/app/page.tsx`),{__esModule:n,$$typeof:l}=a,i=a.default,m=i}};var s=require("../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[466,236],()=>__webpack_exec__(9822));module.exports=t})();