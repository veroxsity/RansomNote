exports.id=236,exports.ids=[236],exports.modules={8359:()=>{},3739:()=>{},6495:(e,o,r)=>{Promise.resolve().then(r.bind(r,6426)),Promise.resolve().then(r.bind(r,6342))},111:(e,o,r)=>{Promise.resolve().then(r.t.bind(r,3724,23)),Promise.resolve().then(r.t.bind(r,5365,23)),Promise.resolve().then(r.t.bind(r,4900,23)),Promise.resolve().then(r.t.bind(r,4714,23)),Promise.resolve().then(r.t.bind(r,5392,23)),Promise.resolve().then(r.t.bind(r,8898,23))},2434:(e,o,r)=>{"use strict";r.d(o,{G:()=>t});var n=r(9885);let t=(0,n.createContext)(null)},6426:(e,o,r)=>{"use strict";r.r(o),r.d(o,{GameProvider:()=>GameProvider});var n=r(784),t=r(9885),s=r(2434),i=r(3843),l=r(345);let GameProvider=({children:e})=>{let{socket:o,isConnected:r}=(0,i.s)(),[d,a]=(0,t.useState)({lobby:null,currentPlayer:null,round:null,error:null,isLoading:!1,hasSubmitted:!1,hasVoted:!1,lastWinnerId:null,isJudgeTurn:!1});(0,t.useEffect)(()=>{if(!o)return;let onLobbyUpdate=e=>{a(o=>({...o,lobby:e,round:e.currentRound??o.round,currentPlayer:o.currentPlayer?e.players.find(e=>e.id===o.currentPlayer.id)??o.currentPlayer:o.currentPlayer,isLoading:!1}))},onLobbyJoined=e=>{a(o=>({...o,lobby:e.lobby,currentPlayer:e.player,isLoading:!1}));try{window.__ransom_lobby_code__=e.lobby.code}catch{}},onRoundBegin=e=>{a(o=>({...o,currentPlayer:o.currentPlayer?{...o.currentPlayer,words:e.words}:o.currentPlayer,round:{prompt:e.prompt,submissions:{},votes:{},stage:"ANSWERING",submissionTime:e.timeLimit},hasSubmitted:!1,hasVoted:!1}))},onRoundReveal=e=>{a(o=>({...o,round:o.round?{...o.round,submissions:e.submissions,stage:"REVEALING"}:o.round}))},onJudgeBegin=e=>{a(o=>({...o,isJudgeTurn:!0,round:o.round?{...o.round,submissions:e.submissions,stage:"VOTING"}:o.round}))},onLobbyError=e=>{a(o=>({...o,error:e.message,isLoading:!1}));try{l.ZP.error(e.message)}catch{}},onSubmitAck=e=>{if(a(o=>({...o,hasSubmitted:!!e.ok,error:e.ok?o.error:e.message??"Submit failed"})),e.ok)try{l.ZP.success("Answer submitted")}catch{}else try{l.ZP.error(e.message??"Submit failed")}catch{}},onVoteAck=e=>{if(a(o=>({...o,hasVoted:!!e.ok,error:e.ok?o.error:e.message??"Vote failed"})),e.ok)try{l.ZP.success("Vote submitted")}catch{}else try{l.ZP.error(e.message??"Vote failed")}catch{}},onWinner=e=>{if(a(o=>({...o,lastWinnerId:e?.winnerId??null,isJudgeTurn:!1})),e?.winnerId==null)try{(0,l.ZP)("Round complete")}catch{}else try{let o=d.lobby?.players.find(o=>o.id===e.winnerId)?.nickname??"Winner";l.ZP.success(`${o} wins the round`)}catch{}};return o.on("lobby:update",onLobbyUpdate),o.on("lobby:joined",onLobbyJoined),o.on("round:begin",onRoundBegin),o.on("round:reveal",onRoundReveal),o.on("judge:begin",onJudgeBegin),o.on("lobby:error",onLobbyError),o.on("round:submitAck",onSubmitAck),o.on("round:voteAck",onVoteAck),o.on("result:winner",onWinner),()=>{o.off("lobby:update",onLobbyUpdate),o.off("lobby:joined",onLobbyJoined),o.off("round:begin",onRoundBegin),o.off("round:reveal",onRoundReveal),o.off("judge:begin",onJudgeBegin),o.off("lobby:error",onLobbyError),o.off("round:submitAck",onSubmitAck),o.off("round:voteAck",onVoteAck),o.off("result:winner",onWinner)}},[o]);let u=(0,t.useCallback)(e=>{o&&(a(e=>({...e,isLoading:!0,error:null})),o.emit("lobby:create",{nickname:e}))},[o]),c=(0,t.useCallback)((e,r)=>{o&&(a(e=>({...e,isLoading:!0,error:null})),o.emit("lobby:join",{code:e,nickname:r}))},[o]),b=(0,t.useCallback)(()=>{o&&d.lobby&&o.emit("game:start",{code:d.lobby.code})},[o,d.lobby]),m=(0,t.useCallback)(()=>{o&&d.lobby&&(a(e=>({...e,isLoading:!0})),o.emit("player:ready",{code:d.lobby.code}))},[o,d.lobby]),y=(0,t.useCallback)(e=>{o&&d.lobby&&d.currentPlayer&&!d.hasSubmitted&&o.emit("round:submit",{lobbyCode:d.lobby.code,playerId:d.currentPlayer.id,answer:e})},[o,d.lobby,d.currentPlayer,d.hasSubmitted]),g=(0,t.useCallback)(e=>{o&&d.lobby&&d.currentPlayer&&!d.hasVoted&&o.emit("round:vote",{lobbyCode:d.lobby.code,voterId:d.currentPlayer.id,submissionId:e})},[o,d.lobby,d.currentPlayer,d.hasVoted]),P=(0,t.useCallback)(e=>{o&&d.lobby&&o.emit("judge:pick",{lobbyCode:d.lobby.code,winnerId:e})},[o,d.lobby]);return(0,n.jsxs)(s.G.Provider,{value:{...d,isConnected:r,createLobby:u,joinLobby:c,startGame:b,setReady:m,submitAnswer:y,submitVote:g,judgePick:P},children:[n.jsx(l.x7,{position:"top-right"}),e]})}},3843:(e,o,r)=>{"use strict";r.d(o,{J:()=>t,s:()=>useSocket});var n=r(9885);let t=(0,n.createContext)({socket:null,isConnected:!1}),useSocket=()=>(0,n.useContext)(t)},6342:(e,o,r)=>{"use strict";r.r(o),r.d(o,{SocketProvider:()=>SocketProvider});var n=r(784),t=r(9885),s=r(594),i=r(3843);let l=process.env.NEXT_PUBLIC_SOCKET_URL||"";process.env.NEXT_PUBLIC_BACKEND_PORT;let SocketProvider=({children:e})=>{let[o,r]=(0,t.useState)(null),[d,a]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{let e=l;e&&"auto"!==e||(e="http://localhost:3001");let o=(0,s.io)(e,{path:"/socket.io",transports:["websocket"],withCredentials:!0,autoConnect:!0,reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:5e3}),n=(process.env.NEXT_PUBLIC_DEBUG_SOCKET??"false")==="true";n&&o.onAny((e,...o)=>{"ping"!==e&&"pong"!==e&&console.log("\uD83D\uDCE9 socket event:",e,o?.[0]??"")}),o.on("connect",()=>{console.log("Connected to Socket.IO server"),a(!0)}),o.on("disconnect",()=>{console.log("Disconnected from Socket.IO server"),a(!1)}),r(o);let endListener=()=>{if(o&&o.connected){let e=window.__ransom_lobby_code__;e&&o.emit("game:end",{code:e})}};return window.addEventListener("game:end-request",endListener),()=>{o.close(),window.removeEventListener("game:end-request",endListener)}},[]),n.jsx(i.J.Provider,{value:{socket:o,isConnected:d},children:e})}},8621:(e,o,r)=>{"use strict";r.r(o),r.d(o,{default:()=>RootLayout,metadata:()=>m,viewport:()=>y});var n=r(4656);r(7633);var t=r(5153);let s=(0,t.createProxy)(String.raw`/home/jelly/Documents/Programming/RansomNote/frontend/app/contexts/socket.provider.tsx`),{__esModule:i,$$typeof:l}=s;s.default;let d=(0,t.createProxy)(String.raw`/home/jelly/Documents/Programming/RansomNote/frontend/app/contexts/socket.provider.tsx#SocketProvider`),a=(0,t.createProxy)(String.raw`/home/jelly/Documents/Programming/RansomNote/frontend/app/contexts/game.provider.tsx`),{__esModule:u,$$typeof:c}=a;a.default;let b=(0,t.createProxy)(String.raw`/home/jelly/Documents/Programming/RansomNote/frontend/app/contexts/game.provider.tsx#GameProvider`),m={title:"Ransom Notes Online"},y={width:"device-width",initialScale:1,maximumScale:1,userScalable:!1};function RootLayout({children:e}){return n.jsx("html",{lang:"en",children:n.jsx("body",{children:n.jsx(d,{children:n.jsx(b,{children:n.jsx("main",{children:e})})})})})}},7633:()=>{}};